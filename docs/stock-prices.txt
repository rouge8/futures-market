Hi Andy,

There are three different things that are reasonable to call prices:
-- the "bid":  the highest unfilled buy offer.
-- the "ask":  the lowest unfilled sell offer.  (Note bid < ask, else there's a trade to execute)
-- the "current" price: last price at which a trade was executed.

There are, in the real world, two kinds of orders (both apply for buy or sell):
-- a "market order":  I'll take the best price I can get (from all unfilled orders).
-- a "limit order" with limit x:  I only want a trade if the price that I get is x or better.

When there's a market order placed, assuming there are any unfilled orders on the other side of the market, then the market order is executed at the price of the best (lowest sell, highest buy) unfilled order on the other side of the market.  (If there are no such unfilled orders, then the market has done something horrific and the order should probably be cancelled.)  This price now defines the last price at which a trade was executed.

When there's a limit order placed, if it's immediately executable (i.e., if its limit price is consistent with the best price on the other side of the market), then treat the limit order as a market order.  When the limit order cannot be immediately executed, then add the limit order to the list of unfilled orders.

FYI, the list of unfilled orders is called an "order book."  It's the table at the top of this page, for example:  http://finance.yahoo.com/q/ecn?s=YHOO.

Thanks!

-- dln

